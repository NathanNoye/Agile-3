var Agile={}||Agile;function typingOutput(e,t,n=63){var i=e.split("");!function e(){i.length>0&&(t.innerHTML+=i.shift(),setTimeout(()=>{e()},n))}()}Agile.core={}||Agile.core,Agile.components={}||Agile.components,Agile.observable={}||Agile.observable,Agile.core={insertHTML:function(e){e.where=e.where||"beforeend",e.el.insertAdjacentHTML(e.where,e.html)},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},initializeComponents:function(){document.querySelectorAll("[data-component]").forEach(e=>{new(Agile.components[e.getAttribute("data-component")])(e)})},ajax:function(e){return new Promise(function(t,n){e.method=e.method.toUpperCase()||"GET","function"==typeof e.before&&e.before();var i=new XMLHttpRequest;if(i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(200==i.status?t(i):n(i),"function"==typeof e.after&&e.after(i))},i.open(e.method,e.url),e.parms){i.setRequestHeader("Content-type","application/x-www-form-urlencoded");let t="";for(var o in e.parms)e.parms.hasOwnProperty(o)&&(t+=o+"="+e.parms[o]+"&");i.send(t.substr(0,t.length-1))}else i.send()})}},document.addEventListener("DOMContentLoaded",()=>{Agile.core.initializeComponents()}),Agile.observable={bind:function(e,t){[].slice.call(e.querySelectorAll("[data-bind]")).forEach(e=>{e.getAttribute("data-bind").split(",").forEach(n=>{var i=n.split(":")[0].replace(" ","").toLowerCase(),o=n.split(":")[1].replace(" ","").toString();"text"===i&&(t[o]=new Agile.observable.text(e)),"css"===i&&(t[o]=new Agile.observable.class(e,o)),e.addEventListener(i,function(n){n.preventDefault();try{t[o](n,e)}catch(e){console.error(`There's an error with the ${o} function `,e)}}),e.removeAttribute("data-bind")})})},text:function(e){var t=this;this.element=e,this.initialValue=e.innerHTML,this.set=function(e,n){t.element.innerHTML=e,n&&"function"==typeof n&&n()},this.get=function(){return t.initialValue}},class:function(e,t){var n=this;this.element=e,this.cssClass=t,this.check=function(e,t){!0===e||"true"===e?(n.element.classList.add(n.cssClass),t&&"function"==typeof t&&t()):n.element.classList.remove(n.cssClass)}},variable:function(e,t){var n=this;this.initialValue=e||null,this.set=function(e){n.initialValue=e,null==n.initialValue&&n.initialValue==e||t&&"function"==typeof t&&t()},this.get=function(){return n.initialValue}},array:function(e,t){var n=this;this.items=new Array,this.push=function(t){this.items.push(t),e(t)},this.remove=function(e){var i=n.items.indexOf(e);i>-1?(n.items.splice(i,1),t(e)):console.error(`item "${e}" not found in array`)},this.length=function(){return n.items.length}},attribute:function(){}},Agile.components.ImageGallery=function(e){this.root=e,this.props=JSON.parse(this.root.dataset.props),this.pagination=7,this.paginationIndex=0,this.dataSource=null,this.render(),this.button=this.root.querySelector("button"),this.imageContainer=this.root.querySelector("[data-images]"),this.modal=this.root.querySelector("[data-modal]"),this.modalImage=this.root.querySelector("[data-modal] > div > img"),this.modalText=this.root.querySelector("[data-modal] > div:last-of-type"),this._displayImages(),Agile.observable.bind(this.root,this)},Agile.components.ImageGallery.prototype.render=function(){this.root.innerHTML+='\n        <div data-modal class="hide" data-bind="click: toggleModal">\n            <div>\n                <img class="center" data-bind="click: viewFullResImg">\n            </div>\n            <div></div>\n        </div>\n        <div data-images></div>\n        <button class="forms-button forms-button-full center" data-bind="click: loadMore">Load More</button>\n    '},Agile.components.ImageGallery.prototype.toggleModal=function(e,t){t.classList.toggle("hide")},Agile.components.ImageGallery.prototype.viewFullResImg=function(e,t){window.open(t.src)},Agile.components.ImageGallery.prototype.getImagesFromServer=function(e,t){Agile.core.ajax({method:"GET",url:"images.json",before:function(){console.log("show loading spinner")},after:function(){console.log("get rid of loading spinner")}}).then(function(e){_show(JSON.parse(e.response))}).catch(function(e){console.error("Something went wrong",e)})},Agile.components.ImageGallery.prototype.loadMore=function(e,t){this.paginationIndex++,this._displayImages()},Agile.components.ImageGallery.prototype._showImageInModal=function(e,t){this.modal.classList.toggle("hide"),this.modalImage.src=t.src.replace("compressed","full"),this.modalText.innerHTML=`${t.alt} <br><small>Click image for full resolution</small>`},Agile.components.ImageGallery.prototype._displayImages=function(){var e=this;Agile.core.ajax({method:"GET",url:"images.json",parm:e.props,before:function(){},after:function(){}}).then(function(t){e.dataSource=JSON.parse(t.response),function(t){for(let n=e.pagination*e.paginationIndex;n<e.pagination*e.paginationIndex+e.pagination;n++)if(Agile.core.insertHTML({el:e.imageContainer,html:`\n                    <div>\n                        <img src="" alt="${t.images[n].alt}" class="invisible" data-source="${t.images[n].src}" data-bind="click: _showImageInModal">\n                    </div>\n                `}),n==t.totalRecords-1){e.button.parentNode.removeChild(e.button);break}let n=[].slice.call(e.root.querySelectorAll("[data-images] > div > [data-source]"));function i(){n.length>0&&(n[0].src=n[0].dataset.source,n[0].removeAttribute("data-source"),n.shift())}n.forEach(e=>{e.addEventListener("load",()=>{setTimeout(()=>{i(),e.classList.remove("invisible")},125)})}),i(),Agile.observable.bind(e.root,e)}(e.dataSource)}).catch(function(e){console.error("Something went wrong",e)})},Agile.components.NavBar=function(e){this.root=e,this.props=JSON.parse(this.root.dataset.props),this.render(),this.navBar=this.root.querySelector(".nav-standard"),Agile.observable.bind(this.root,this)},Agile.components.NavBar.prototype.render=function(){var e="";this.props.links.forEach(t=>{for(key in t)e+=`<a data-bind="click: hrefClick" href="${t[key]}">${key}</a>`}),this.root.innerHTML+=`\n        <div class="nav-ham" data-bind="click: hbMenu">â˜°</div>\n        <nav class="nav-standard flat-shadow-around-large slide">\n            ${e}\n        </nav>\n    `},Agile.components.NavBar.prototype.hrefClick=function(e,t){window.location.href=t.href},Agile.components.NavBar.prototype.hbMenu=function(e,t){this.navBar.classList.toggle("slide")};